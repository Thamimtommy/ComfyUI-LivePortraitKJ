{
  "last_node_id": 134,
  "last_link_id": 304,
  "nodes": [
    {
      "id": 122,
      "type": "LivePortraitProcess",
      "pos": [
        342,
        49
      ],
      "size": {
        "0": 443.4000244140625,
        "1": 278
      },
      "flags": {},
      "order": 12,
      "mode": 0,
      "inputs": [
        {
          "name": "pipeline",
          "type": "LIVEPORTRAITPIPE",
          "link": 277
        },
        {
          "name": "crop_info",
          "type": "CROPINFO",
          "link": 298
        },
        {
          "name": "source_image",
          "type": "IMAGE",
          "link": 279
        },
        {
          "name": "driving_images",
          "type": "IMAGE",
          "link": 304
        },
        {
          "name": "mask",
          "type": "MASK",
          "link": 281
        },
        {
          "name": "opt_retargeting_info",
          "type": "RETARGETINGINFO",
          "link": null
        }
      ],
      "outputs": [
        {
          "name": "cropped_images",
          "type": "IMAGE",
          "links": [],
          "shape": 3,
          "slot_index": 0
        },
        {
          "name": "full_images",
          "type": "IMAGE",
          "links": [
            283
          ],
          "shape": 3,
          "slot_index": 1
        },
        {
          "name": "mask",
          "type": "MASK",
          "links": [],
          "shape": 3,
          "slot_index": 2
        }
      ],
      "properties": {
        "Node name for S&R": "LivePortraitProcess"
      },
      "widgets_values": [
        false,
        0.03,
        true,
        true,
        1,
        "constant"
      ]
    },
    {
      "id": 95,
      "type": "VHS_VideoCombine",
      "pos": [
        820,
        -722
      ],
      "size": [
        585.4033203125,
        644.0396152712265
      ],
      "flags": {},
      "order": 13,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 227,
          "slot_index": 0
        },
        {
          "name": "audio",
          "type": "VHS_AUDIO",
          "link": null
        },
        {
          "name": "meta_batch",
          "type": "VHS_BatchManager",
          "link": null
        },
        {
          "name": "vae",
          "type": "VAE",
          "link": null
        }
      ],
      "outputs": [
        {
          "name": "Filenames",
          "type": "VHS_FILENAMES",
          "links": null,
          "shape": 3
        }
      ],
      "properties": {
        "Node name for S&R": "VHS_VideoCombine"
      },
      "widgets_values": {
        "frame_rate": 16,
        "loop_count": 0,
        "filename_prefix": "AnimateDiff",
        "format": "video/h264-mp4",
        "pix_fmt": "yuv420p",
        "crf": 19,
        "save_metadata": true,
        "pingpong": false,
        "save_output": true,
        "videopreview": {
          "hidden": false,
          "paused": false,
          "params": {
            "filename": "AnimateDiff_00646.mp4",
            "subfolder": "",
            "type": "output",
            "format": "video/h264-mp4",
            "frame_rate": 16
          }
        }
      }
    },
    {
      "id": 99,
      "type": "KeypointsToImage",
      "pos": [
        434,
        -409
      ],
      "size": {
        "0": 317.4000244140625,
        "1": 26
      },
      "flags": {},
      "order": 11,
      "mode": 0,
      "inputs": [
        {
          "name": "crop_info",
          "type": "CROPINFO",
          "link": 297
        }
      ],
      "outputs": [
        {
          "name": "keypoints_image",
          "type": "IMAGE",
          "links": [
            227
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "KeypointsToImage"
      }
    },
    {
      "id": 131,
      "type": "LivePortraitCropper",
      "pos": [
        5,
        -428
      ],
      "size": {
        "0": 330,
        "1": 246
      },
      "flags": {},
      "order": 10,
      "mode": 0,
      "inputs": [
        {
          "name": "cropper",
          "type": "LPCROPPER",
          "link": 295
        },
        {
          "name": "source_image",
          "type": "IMAGE",
          "link": 296
        }
      ],
      "outputs": [
        {
          "name": "cropped_image",
          "type": "IMAGE",
          "links": null,
          "shape": 3
        },
        {
          "name": "crop_info",
          "type": "CROPINFO",
          "links": [
            297,
            298
          ],
          "shape": 3,
          "slot_index": 1
        }
      ],
      "properties": {
        "Node name for S&R": "LivePortraitCropper"
      },
      "widgets_values": [
        512,
        2.3,
        0,
        -0.125,
        0,
        "large-small",
        true
      ]
    },
    {
      "id": 129,
      "type": "LivePortraitLoadCropper",
      "pos": [
        -413,
        -197
      ],
      "size": {
        "0": 315,
        "1": 82
      },
      "flags": {},
      "order": 0,
      "mode": 0,
      "outputs": [
        {
          "name": "cropper",
          "type": "LPCROPPER",
          "links": [
            295
          ],
          "shape": 3
        }
      ],
      "properties": {
        "Node name for S&R": "LivePortraitLoadCropper"
      },
      "widgets_values": [
        "CPU",
        true
      ]
    },
    {
      "id": 1,
      "type": "DownloadAndLoadLivePortraitModels",
      "pos": [
        -407,
        -60
      ],
      "size": [
        302.4346454772949,
        58
      ],
      "flags": {},
      "order": 1,
      "mode": 0,
      "outputs": [
        {
          "name": "live_portrait_pipe",
          "type": "LIVEPORTRAITPIPE",
          "links": [
            277
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "DownloadAndLoadLivePortraitModels"
      },
      "widgets_values": [
        "fp16"
      ]
    },
    {
      "id": 133,
      "type": "PrimitiveNode",
      "pos": [
        -1143,
        99
      ],
      "size": [
        247.64350051879865,
        83.56705969238237
      ],
      "flags": {},
      "order": 2,
      "mode": 0,
      "outputs": [
        {
          "name": "INT",
          "type": "INT",
          "links": [
            301,
            302
          ],
          "widget": {
            "name": "frame_load_cap"
          },
          "slot_index": 0
        }
      ],
      "title": "frame_load_cap",
      "properties": {
        "Run widget replace on values": false
      },
      "widgets_values": [
        33,
        "fixed"
      ]
    },
    {
      "id": 73,
      "type": "VHS_LoadVideo",
      "pos": [
        -844,
        -451
      ],
      "size": [
        357.4082946777344,
        466.9858271760761
      ],
      "flags": {},
      "order": 4,
      "mode": 0,
      "inputs": [
        {
          "name": "meta_batch",
          "type": "VHS_BatchManager",
          "link": null
        },
        {
          "name": "vae",
          "type": "VAE",
          "link": null
        },
        {
          "name": "frame_load_cap",
          "type": "INT",
          "link": 301,
          "widget": {
            "name": "frame_load_cap"
          },
          "slot_index": 2
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            183
          ],
          "shape": 3,
          "slot_index": 0
        },
        {
          "name": "frame_count",
          "type": "INT",
          "links": null,
          "shape": 3
        },
        {
          "name": "audio",
          "type": "VHS_AUDIO",
          "links": null,
          "shape": 3
        },
        {
          "name": "video_info",
          "type": "VHS_VIDEOINFO",
          "links": null,
          "shape": 3
        }
      ],
      "properties": {
        "Node name for S&R": "VHS_LoadVideo"
      },
      "widgets_values": {
        "video": "Kung_Fu_Neo_vs_Morpheus_Trim_1.mp4",
        "force_rate": 0,
        "force_size": "Disabled",
        "custom_width": 512,
        "custom_height": 512,
        "frame_load_cap": 33,
        "skip_first_frames": 0,
        "select_every_nth": 1,
        "choose video to upload": "image",
        "videopreview": {
          "hidden": false,
          "paused": false,
          "params": {
            "frame_load_cap": 33,
            "skip_first_frames": 0,
            "force_rate": 0,
            "filename": "Kung_Fu_Neo_vs_Morpheus_Trim_1.mp4",
            "type": "input",
            "format": "video/mp4",
            "select_every_nth": 1
          }
        }
      }
    },
    {
      "id": 78,
      "type": "GetImageSizeAndCount",
      "pos": [
        -362,
        -428
      ],
      "size": {
        "0": 210,
        "1": 86
      },
      "flags": {},
      "order": 7,
      "mode": 0,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 183
        }
      ],
      "outputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "links": [
            279,
            296
          ],
          "shape": 3,
          "slot_index": 0
        },
        {
          "name": "1272 width",
          "type": "INT",
          "links": null,
          "shape": 3
        },
        {
          "name": "720 height",
          "type": "INT",
          "links": null,
          "shape": 3
        },
        {
          "name": "33 count",
          "type": "INT",
          "links": null,
          "shape": 3
        }
      ],
      "properties": {
        "Node name for S&R": "GetImageSizeAndCount"
      }
    },
    {
      "id": 8,
      "type": "VHS_LoadVideo",
      "pos": [
        -834,
        119
      ],
      "size": [
        340.15554113769485,
        584.1555411376949
      ],
      "flags": {},
      "order": 5,
      "mode": 0,
      "inputs": [
        {
          "name": "meta_batch",
          "type": "VHS_BatchManager",
          "link": null
        },
        {
          "name": "vae",
          "type": "VAE",
          "link": null
        },
        {
          "name": "frame_load_cap",
          "type": "INT",
          "link": 302,
          "widget": {
            "name": "frame_load_cap"
          }
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            303
          ],
          "shape": 3,
          "slot_index": 0
        },
        {
          "name": "frame_count",
          "type": "INT",
          "links": null,
          "shape": 3
        },
        {
          "name": "audio",
          "type": "VHS_AUDIO",
          "links": null,
          "shape": 3
        },
        {
          "name": "video_info",
          "type": "VHS_VIDEOINFO",
          "links": null,
          "shape": 3
        }
      ],
      "properties": {
        "Node name for S&R": "VHS_LoadVideo"
      },
      "widgets_values": {
        "video": "d6.mp4",
        "force_rate": 0,
        "force_size": "Disabled",
        "custom_width": 512,
        "custom_height": 512,
        "frame_load_cap": 33,
        "skip_first_frames": 0,
        "select_every_nth": 1,
        "choose video to upload": "image",
        "videopreview": {
          "hidden": false,
          "paused": false,
          "params": {
            "frame_load_cap": 33,
            "skip_first_frames": 0,
            "force_rate": 0,
            "filename": "d6.mp4",
            "type": "input",
            "format": "video/mp4",
            "select_every_nth": 1
          }
        }
      }
    },
    {
      "id": 134,
      "type": "GetImageSizeAndCount",
      "pos": [
        -298,
        127
      ],
      "size": {
        "0": 210,
        "1": 86
      },
      "flags": {},
      "order": 8,
      "mode": 0,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 303
        }
      ],
      "outputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "links": [
            304
          ],
          "shape": 3,
          "slot_index": 0
        },
        {
          "name": "480 width",
          "type": "INT",
          "links": null,
          "shape": 3
        },
        {
          "name": "480 height",
          "type": "INT",
          "links": null,
          "shape": 3
        },
        {
          "name": "33 count",
          "type": "INT",
          "links": null,
          "shape": 3
        }
      ],
      "properties": {
        "Node name for S&R": "GetImageSizeAndCount"
      }
    },
    {
      "id": 107,
      "type": "GetImageSizeAndCount",
      "pos": [
        858,
        68
      ],
      "size": {
        "0": 210,
        "1": 86
      },
      "flags": {},
      "order": 14,
      "mode": 0,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 283
        }
      ],
      "outputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "links": [
            242
          ],
          "shape": 3,
          "slot_index": 0
        },
        {
          "name": "1272 width",
          "type": "INT",
          "links": null,
          "shape": 3
        },
        {
          "name": "720 height",
          "type": "INT",
          "links": null,
          "shape": 3
        },
        {
          "name": "33 count",
          "type": "INT",
          "links": null,
          "shape": 3
        }
      ],
      "properties": {
        "Node name for S&R": "GetImageSizeAndCount"
      }
    },
    {
      "id": 90,
      "type": "VHS_VideoCombine",
      "pos": [
        1132,
        56
      ],
      "size": [
        893.5372314453125,
        818.4550366671581
      ],
      "flags": {},
      "order": 15,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 242,
          "slot_index": 0
        },
        {
          "name": "audio",
          "type": "VHS_AUDIO",
          "link": null
        },
        {
          "name": "meta_batch",
          "type": "VHS_BatchManager",
          "link": null
        },
        {
          "name": "vae",
          "type": "VAE",
          "link": null
        }
      ],
      "outputs": [
        {
          "name": "Filenames",
          "type": "VHS_FILENAMES",
          "links": null,
          "shape": 3
        }
      ],
      "properties": {
        "Node name for S&R": "VHS_VideoCombine"
      },
      "widgets_values": {
        "frame_rate": 16,
        "loop_count": 0,
        "filename_prefix": "AnimateDiff",
        "format": "video/h264-mp4",
        "pix_fmt": "yuv420p",
        "crf": 19,
        "save_metadata": true,
        "pingpong": false,
        "save_output": true,
        "videopreview": {
          "hidden": false,
          "paused": false,
          "params": {
            "filename": "AnimateDiff_00647.mp4",
            "subfolder": "",
            "type": "output",
            "format": "video/h264-mp4",
            "frame_rate": 16
          }
        }
      }
    },
    {
      "id": 83,
      "type": "CreateShapeMask",
      "pos": [
        -122,
        445
      ],
      "size": {
        "0": 315,
        "1": 270
      },
      "flags": {},
      "order": 3,
      "mode": 0,
      "outputs": [
        {
          "name": "mask",
          "type": "MASK",
          "links": [
            192,
            281
          ],
          "shape": 3,
          "slot_index": 0
        },
        {
          "name": "mask_inverted",
          "type": "MASK",
          "links": null,
          "shape": 3
        }
      ],
      "properties": {
        "Node name for S&R": "CreateShapeMask"
      },
      "widgets_values": [
        "circle",
        1,
        256,
        256,
        0,
        512,
        512,
        480,
        480
      ]
    },
    {
      "id": 81,
      "type": "GrowMaskWithBlur",
      "pos": [
        228,
        450
      ],
      "size": {
        "0": 315,
        "1": 246
      },
      "flags": {},
      "order": 6,
      "mode": 0,
      "inputs": [
        {
          "name": "mask",
          "type": "MASK",
          "link": 192,
          "slot_index": 0
        }
      ],
      "outputs": [
        {
          "name": "mask",
          "type": "MASK",
          "links": [
            187
          ],
          "shape": 3,
          "slot_index": 0
        },
        {
          "name": "mask_inverted",
          "type": "MASK",
          "links": null,
          "shape": 3
        }
      ],
      "properties": {
        "Node name for S&R": "GrowMaskWithBlur"
      },
      "widgets_values": [
        0,
        0,
        true,
        false,
        13.9,
        1,
        1,
        false
      ]
    },
    {
      "id": 82,
      "type": "MaskPreview+",
      "pos": [
        576,
        448
      ],
      "size": {
        "0": 210,
        "1": 246
      },
      "flags": {},
      "order": 9,
      "mode": 0,
      "inputs": [
        {
          "name": "mask",
          "type": "MASK",
          "link": 187
        }
      ],
      "properties": {
        "Node name for S&R": "MaskPreview+"
      }
    }
  ],
  "links": [
    [
      183,
      73,
      0,
      78,
      0,
      "IMAGE"
    ],
    [
      187,
      81,
      0,
      82,
      0,
      "MASK"
    ],
    [
      192,
      83,
      0,
      81,
      0,
      "MASK"
    ],
    [
      227,
      99,
      0,
      95,
      0,
      "IMAGE"
    ],
    [
      242,
      107,
      0,
      90,
      0,
      "IMAGE"
    ],
    [
      277,
      1,
      0,
      122,
      0,
      "LIVEPORTRAITPIPE"
    ],
    [
      279,
      78,
      0,
      122,
      2,
      "IMAGE"
    ],
    [
      281,
      83,
      0,
      122,
      4,
      "MASK"
    ],
    [
      283,
      122,
      1,
      107,
      0,
      "IMAGE"
    ],
    [
      295,
      129,
      0,
      131,
      0,
      "LPCROPPER"
    ],
    [
      296,
      78,
      0,
      131,
      1,
      "IMAGE"
    ],
    [
      297,
      131,
      1,
      99,
      0,
      "CROPINFO"
    ],
    [
      298,
      131,
      1,
      122,
      1,
      "CROPINFO"
    ],
    [
      301,
      133,
      0,
      73,
      2,
      "INT"
    ],
    [
      302,
      133,
      0,
      8,
      2,
      "INT"
    ],
    [
      303,
      8,
      0,
      134,
      0,
      "IMAGE"
    ],
    [
      304,
      134,
      0,
      122,
      3,
      "IMAGE"
    ]
  ],
  "groups": [],
  "config": {},
  "extra": {
    "ds": {
      "scale": 0.6209213230591555,
      "offset": {
        "0": 1191.168701171875,
        "1": 790.9026489257812
      }
    }
  },
  "version": 0.4
}